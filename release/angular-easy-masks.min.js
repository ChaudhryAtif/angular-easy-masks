// https://github.com/awerlang/angular-easy-masks
!function(){"use strict";function isSeparator(char){return"."===char||"-"===char||"/"===char||" "===char}function isDigit(char){return char>="0"&&"9">=char}function testPosition(mask,position,char){var charAtPos=mask[position];switch(charAtPos){case"9":return isDigit(char);case" ":return!0;case".":case"-":case"/":return isSeparator(char);default:return!1}}function easyMask(input,mask){if("string"!=typeof input)return null;for(var parsedValue="",inputLen=input.length,position=0;inputLen>position&&parsedValue.length<mask.length;){var ch=input[position],len=parsedValue.length,nextCharInMask=mask[len];isSeparator(nextCharInMask)&&nextCharInMask!==ch&&(parsedValue+=nextCharInMask),testPosition(mask,parsedValue.length,ch)&&(parsedValue+=ch),position++}return parsedValue}function wtEasyMask(easyMask){return{restrict:"A",require:"ngModel",link:function(scope,element,attrs,ngModelCtrl){var mask=attrs.wtEasyMask||attrs.placeholder||"";attrs.maxlength||attrs.$set("maxlength",mask.length);var isCompleted=function(value){return mask.length===value.length},isValid=function(modelValue,viewValue){return null==viewValue||0===viewValue.length||isCompleted(viewValue)};ngModelCtrl.$validators.mask=function(modelValue,viewValue){return isValid(modelValue,viewValue)},ngModelCtrl.$formatters.push(function(value){return easyMask(value,mask)}),ngModelCtrl.$parsers.push(function(value){var parsedValue=easyMask(value,mask);return""===parsedValue?null:parsedValue}),element.on("keypress",function(event){var keyIsSpace=32===event.which;keyIsSpace&&event.preventDefault()}),element.on("input",function(event){var parsedValue=easyMask(element.val(),mask);ngModelCtrl.$viewValue!==parsedValue&&(ngModelCtrl.$setViewValue(parsedValue),ngModelCtrl.$render())})}}}angular.module("wt.easy",[]).directive("wtEasyMask",wtEasyMask).factory("easyMask",function(){return easyMask})}();